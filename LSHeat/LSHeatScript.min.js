!function(){"use strict";function e(){var e={"heatmap-activated":{name:"Aktiviert",type:"boolean","default":!1},"heatmap-radius":{name:"Radius",type:"range","default":"80"},"heatmap-intensity":{name:"Intensität",type:"range","default":"15"},"heatmap-vehicle":{name:"Fahrzeug-Typ",type:"select","default":"0"}};if(window.localStorage.getItem(s))e=JSON.parse(window.localStorage.getItem(s));else for(var t in e)e[t].value=e[t].default;return e}function t(t){var a=e();return a[t].value}function a(t){var a=e();for(var i in a){var n=$("#"+i);"boolean"==a[i].type?a[i].value=n.is(":checked")?!0:!1:"range"==a[i].type?(console.log(n.slider("value")),a[i].value=n.slider("value")):a[i].value=parseInt(n.val())}window.localStorage.removeItem(s),window.localStorage.setItem(s,JSON.stringify(a)),t&&parent.location.reload()}function i(){l(),n()}function n(){var e;e=t("heatmap-activated")?o[t("heatmap-vehicle")]:"Aktivieren",$(".leaflet-control-container .leaflet-bottom.leaflet-left").append('<div id="ls-heatmap-config-wrapper" class="leaflet-bar leaflet-control" style="background-color: white;"><img id="ls-heatmap-config-img" style="height: 32px; width: 32px; cursor: pointer;" src="https://jalibu.github.io/LSHeat/LSHeat/ls-heat-layer.png"></div>'),$("#ls-heatmap-config-img").on("click",function(){var e=$("#ls-heatmap-config-wrapper"),i="true"==$(e).attr("data-opened");if(i)$("#ls-heatmap-config").remove(),$(e).attr("data-opened","false");else{var n='<div id="ls-heatmap-config"><table style="margin-left: 30px; margin-bottom: 10px; margin-right: 10px;" class="ls-form-group"></table>';$("#ls-heatmap-config-wrapper").append(n),$(e).attr("data-opened","true"),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Aktiviert</td><td><input class="ls-input" type="checkbox" id="heatmap-activated"></td></tr>'),t("heatmap-activated")&&$("#heatmap-activated").attr("checked","checked"),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Radius</td><td><div class="value-slider" data-min="0" data-max="200" data-value="'+t("heatmap-radius")+'" id="heatmap-radius"></div></td></tr>'),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Intensität</td><td><div class="value-slider" data-min="0" data-max="50" data-value="'+t("heatmap-intensity")+'" id="heatmap-intensity"></div></td></tr>'),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Fahrzeug</td><td><select class="ls-input" id="heatmap-vehicle"></select></td></tr>');for(var r in p)$("#heatmap-vehicle").append(t("heatmap-vehicle")==this?'<option selected value="'+r+'">'+p[r].name+"</option>":'<option value="'+r+'">'+p[r].name+"</option>");$(c).each(function(){$("#heatmap-vehicle").append(t("heatmap-vehicle")==this?'<option selected value="'+this+'">'+o[this]+"</option>":'<option value="'+this+'">'+o[this]+"</option>")}),$("#ls-heatmap-config .ls-input").on("change",function(){a(),l()}),$(".value-slider").slider({start:function(){map.dragging.disable()},stop:function(){map.dragging.enable(),a(),l()},create:function(){$(this).slider("option","max",$(this).data("max")),$(this).slider("option","value",$(this).data("value"))},min:1}),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td><button id="heatmap_close" class="btn">Schließen</button><td><button id="heatmap_reset" class="btn">Zurücksetzen</button></td></td></tr>'),$("#heatmap_reset").click(function(){window.localStorage.removeItem(s),l(),$("#ls-heatmap-config-img").click(),$("#ls-heatmap-config-img").click()}),$("#heatmap_close").click(function(){$("#ls-heatmap-config-img").click()})}})}function l(){if(void 0!==r&&(map.removeLayer(r),r=void 0),t("heatmap-activated")){var e=[];$("#building_list .building_list_li").each(function(){var t=$(this),a=$(t).find(".map_position_mover").attr("data-longitude"),i=$(t).find(".map_position_mover").attr("data-latitude");$(this).find(".building_list_vehicle_element").each(function(){var t=$(this).find(".vehicle_building_list_button").attr("vehicle_type_id"),n=$(this).find(".vehicle_building_list_button").text(),l={vehicle_type_id:parseInt(t),lat:i,"long":a,name:n};e.push(l),-1===c.indexOf(t)&&c.push(t)})});var a=[];$(e).each(function(){var e=this;e.vehicle_type_id==t("heatmap-vehicle")?a.push([e.lat,e.long,t("heatmap-intensity")]):void 0!==p[t("heatmap-vehicle")]&&-1!==p[t("heatmap-vehicle")].vehicleTypeIds.indexOf(e.vehicle_type_id)&&a.push([e.lat,e.long,t("heatmap-intensity")])}),r=L.heatLayer(a,{radius:t("heatmap-radius")}).addTo(map)}}$("head").append('<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"><\/script>'),$("head").append('<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"><\/script>'),$("head").append('<script type="text/javascript" src="https://jalibu.github.io/LSHeat/LSHeat/leaflet-heat.js"><\/script>');var s="LS_HEATMAP_STORAGE",o={0:"LF 20",1:"LF 10",2:"DLK 23",3:"ELW 1",4:"RW",5:"GW-A",6:"LF 8/6",7:"LF 20/16",8:"LF 10/6",9:"LF 16-TS",10:"GW-Öl",11:"GW-L2-Wasser",12:"GW-Messtechnik",13:"SW 1000",14:"SW 2000",15:"SW 2000-Tr",16:"SW KatS",17:"TLF 2000",18:"TLF 3000",19:"TLF 8/8",20:"TLF 8/18",21:"TLF 16/24-Tr",22:"TLF 16/25",23:"TLF 16/45",24:"TLF 20/40",25:"TLF 20/40-SL",26:"TLF 16",27:"GW-Gefahrgut",28:"RTW",29:"NEF",30:"HLF 20",31:"RTH",32:"FuStW",33:"GW-Höhenrettung",34:"ELW 2",35:"leBefKw",36:"MTW",37:"TSF-W",38:"KTW",39:"GKW",40:"MTW-TZ",41:"MzKW",42:"LKW K9",43:"BRmG R",44:"Anh. DLE",45:"MLW 5",46:"WLF",47:"AB-Rüst",48:"AB-Atemschutz",49:"AB-Öl",50:"GruKw",51:"FüKw",52:"GefKw",53:"GW Dekon-P",54:"AB-Dekon-P",55:"KdoW-LNA",56:"KdoW-OrgL",57:"Kran",58:"KTW Typ B",59:"ELW 1 (SEG)",60:"GW-SAN",61:"Polizeihubschrauber",62:"AB-Schlauch",63:"GW-Taucher",64:"GW-Wasserrettung",65:"LKW 7 Lkr 19 tm",66:"Anh MzB",67:"Anh SchlB",68:"Anh MzAB",69:"Tauchkraftwagen",70:"MZB",71:"AB-MZB"},p={1000:{name:"[Löschfahrzeuge]",vehicleTypeIds:[0,1,6,7,8,9,30,37]},1001:{name:"[Tanklöschfahrzeuge]",vehicleTypeIds:[17,18,19,20,21,22,23,24,25,26]},1002:{name:"[Schlauchwagen]",vehicleTypeIds:[11,13,14,15,16]}};$(window).load(function(){window.top!=window.self||i()});var r,c=[]}();