!function(){"use strict";function t(){var t={"heatmap-activated":{name:"Aktiviert",type:"boolean","default":!1},"heatmap-radius":{name:"Radius",type:"range","default":"80"},"heatmap-intensity":{name:"Intensität",type:"range","default":"15"},"heatmap-vehicle":{name:"Fahrzeug-Typ",type:"select","default":"0"}};if(window.localStorage.getItem(o))t=JSON.parse(window.localStorage.getItem(o));else for(var e in t)t[e].value=t[e].default;return t}function e(e){var a=t();return a[e].value}function a(e){var a=t();for(var i in a){var n=$("#"+i);a[i].value="boolean"==a[i].type?n.is(":checked")?!0:!1:parseInt(n.val())}window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(a)),e&&parent.location.reload()}function i(){l(),n()}function n(){var t;t=e("heatmap-activated")?p[e("heatmap-vehicle")]:"Aktivieren",$(".leaflet-control-container .leaflet-bottom.leaflet-left").append('<div id="ls-heatmap-config-wrapper" class="leaflet-bar leaflet-control" style="background-color: white;"><img id="ls-heatmap-config-img" style="height: 32px; width: 32px; cursor: pointer;" src="https://jalibu.github.io/LSHeat/LSHeat/ls-heat-layer.png"></div>'),$("#ls-heatmap-config-img").on("click",function(){var t=$("#ls-heatmap-config-wrapper"),i="true"==$(t).attr("data-opened");if(i)$("#ls-heatmap-config").remove(),$(t).attr("data-opened","false");else{var n='<div id="ls-heatmap-config"><table style="margin-left: 30px; margin-bottom: 10px; margin-right: 10px;" class="ls-form-group"></table>';$("#ls-heatmap-config-wrapper").append(n),$(t).attr("data-opened","true"),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Aktiviert</td><td><input class="ls-input" type="checkbox" id="heatmap-activated"></td></tr>'),e("heatmap-activated")&&$("#heatmap-activated").attr("checked","checked"),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Radius</td><td><input class="ls-input" type="text" value="'+e("heatmap-radius")+'" id="heatmap-radius"></td></tr>'),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Intensität</td><td><input class="ls-input" type="text" value="'+e("heatmap-intensity")+'" id="heatmap-intensity"></td></tr>'),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td>Fahrzeug</td><td><select class="ls-input" id="heatmap-vehicle"></select></td></tr>');for(var c in s)$("#heatmap-vehicle").append(e("heatmap-vehicle")==this?'<option selected value="'+c+'">'+s[c].name+"</option>":'<option value="'+c+'">'+s[c].name+"</option>");$(h).each(function(){$("#heatmap-vehicle").append(e("heatmap-vehicle")==this?'<option selected value="'+this+'">'+p[this]+"</option>":'<option value="'+this+'">'+p[this]+"</option>")}),$("#ls-heatmap-config .ls-input").on("change",function(){a(),l()}),$("#ls-heatmap-config .ls-form-group").append('<tr class="ls-heatmap-option"><td><button id="heatmap_close" class="btn">Schließen</button><td><button id="heatmap_reset" class="btn">Zurücksetzen</button></td></td></tr>'),$("#heatmap_reset").click(function(){window.localStorage.removeItem(o),l(),$("#ls-heatmap-config-img").click(),$("#ls-heatmap-config-img").click()}),$("#heatmap_close").click(function(){$("#ls-heatmap-config-img").click()})}})}function l(){if(void 0!==c&&(map.removeLayer(c),c=void 0),e("heatmap-activated")){var t=[];$("#building_list .building_list_li").each(function(){var e=$(this),a=$(e).find(".map_position_mover").attr("data-longitude"),i=$(e).find(".map_position_mover").attr("data-latitude");$(this).find(".building_list_vehicle_element").each(function(){var e=$(this).find(".vehicle_building_list_button").attr("vehicle_type_id"),n=$(this).find(".vehicle_building_list_button").text(),l={vehicle_type_id:parseInt(e),lat:i,"long":a,name:n};t.push(l),-1===h.indexOf(e)&&h.push(e)})});var a=[];$(t).each(function(){var t=this;t.vehicle_type_id==e("heatmap-vehicle")?a.push([t.lat,t.long,e("heatmap-intensity")]):void 0!==s[e("heatmap-vehicle")]&&-1!==s[e("heatmap-vehicle")].vehicleTypeIds.indexOf(t.vehicle_type_id)&&a.push([t.lat,t.long,e("heatmap-intensity")])}),c=L.heatLayer(a,{radius:e("heatmap-radius")}).addTo(map)}}$("head").append('<script type="text/javascript" src="https://jalibu.github.io/LSHeat/LSHeat/leaflet-heat.js"><\/script>');var o="LS_HEATMAP_STORAGE",p={0:"LF 20",1:"LF 10",2:"DLK 23",3:"ELW 1",4:"RW",5:"GW-A",6:"LF 8/6",7:"LF 20/16",8:"LF 10/6",9:"LF 16-TS",10:"GW-Öl",11:"GW-L2-Wasser",12:"GW-Messtechnik",13:"SW 1000",14:"SW 2000",15:"SW 2000-Tr",16:"SW KatS",17:"TLF 2000",18:"TLF 3000",19:"TLF 8/8",20:"TLF 8/18",21:"TLF 16/24-Tr",22:"TLF 16/25",23:"TLF 16/45",24:"TLF 20/40",25:"TLF 20/40-SL",26:"TLF 16",27:"GW-Gefahrgut",28:"RTW",29:"NEF",30:"HLF 20",31:"RTH",32:"FuStW",33:"GW-Höhenrettung",34:"ELW 2",35:"leBefKw",36:"MTW",37:"TSF-W",38:"KTW",39:"GKW",40:"MTW-TZ",41:"MzKW",42:"LKW K9",43:"BRmG R",44:"Anh. DLE",45:"MLW 5",46:"WLF",47:"AB-Rüst",48:"AB-Atemschutz",49:"AB-Öl",50:"GruKw",51:"FüKw",52:"GefKw",53:"GW Dekon-P",54:"AB-Dekon-P",55:"KdoW-LNA",56:"KdoW-OrgL",57:"Kran",58:"KTW Typ B",59:"ELW 1 (SEG)",60:"GW-SAN",61:"Polizeihubschrauber",62:"AB-Schlauch",63:"GW-Taucher",64:"GW-Wasserrettung",65:"LKW 7 Lkr 19 tm",66:"Anh MzB",67:"Anh SchlB",68:"Anh MzAB",69:"Tauchkraftwagen",70:"MZB",71:"AB-MZB"},s={1000:{name:"[Löschfahrzeuge]",vehicleTypeIds:[0,1,6,7,8,9,30,37]},1001:{name:"[Tanklöschfahrzeuge]",vehicleTypeIds:[17,18,19,20,21,22,23,24,25,26]},1002:{name:"[Schlauchwagen]",vehicleTypeIds:[11,13,14,15,16]}};$(window).load(function(){window.top!=window.self||i()});var c,h=[]}();